<div class="row profile-title">
    <h3>My Profile</h3>
    <div id="profile-line"></div>
</div>

<div class="row" id="user-profile-row">
    <div class="col-md-5 d-flex justify-content-center profile-col"> 
        {{!-- Put user profile pic here --}}
        <img src="../assets/male-profile.png" id="profile-picture">
    </div>
         
    
    <div class="col-md-7 profile-info-col profile-col"> 
        <div id="profile-username"> Username: {{user.name}} </div>
        <div id="profile-email"> Email: {{user.email}} </div>
        <div id="profile-birthday"> Birthday: {{user.birthday}} </div>
       
    </div>

</div>

{{!-- Bookmarked attraction --}}
<div class="profile-subtitle">
    <h4>Favourite attraction</h4>
    <div class="profile-subtitle-line"></div>
</div>
<div class="row no-gutters profile-attraction-row" id="favourite-attraction-row">

</div>
    
{{!-- Line --}}
<div class="profile-line-grey"></div>

{{!-- User attraction --}}
<div class="profile-subtitle">
    <h4>My attraction</h4>
    <div class="profile-subtitle-line" ></div>
</div>
<div class="row no-gutters profile-attraction-row" id="my-attraction-row" >

</div>

{{!-- Line --}}
<div class="profile-line-grey"></div>

{{!-- User attraction --}}
<div class="profile-subtitle">
    <h4>My plans</h4>
    <div class="profile-subtitle-line"></div>
</div>
<div class="row no-gutters profile-attraction-row" id="myPlansRow" >
    <div class="col-md-3 col-5 profile-attraction-col">
        <img src="../assets/garden3.jpeg" class="profile-attraction">
    </div>
    <div class="col-md-3 col-5 profile-attraction-col">
        <img src="../assets/coffee.jpg" class="profile-attraction">
    </div>
    <div class="col-md-3 col-5 profile-attraction-col">
        <img src="../assets/garden3.jpeg" class="profile-attraction">
    </div>
    <div class="col-md-3 col-5 profile-attraction-col">4</div>
    <div class="col-md-3 col-5 profile-attraction-col">5</div>
</div>

<script>
    let userId={{user.id}};


    //Get favourite attraction
    function checkFavourite(id){
        return new Promise(function(resolve,reject){
            $.get( `/api/bookmark/${id}`, function() {
            })
            .done(function(data) {
                let bookmarkArray=data.map(function(object){
                    return object.attractionid
                })
                resolve(bookmarkArray)
            }
            )
            .fail(function() {
                console.log( "Cannot get attraction" );
                reject();
            })

    })
    }

    async function getFavouriteAttraction(){
        let array=await checkFavourite(userId);
<<<<<<< HEAD
        console.log('array', array)
         /*$.get( `/api/city/${cityName}`, function() {
        array[i].id
        console.log('array', array)
        /* $.get( `/api/city/${cityName}`, function() {
=======
      
        for(var i = 0; i<array.length; i++){
            $.get( `/api/attraction/${array[i]}`, function() {
>>>>>>> 47117457469c763f11e777fb85ba5577b1851181
            })
            .done(function(data) {
          
            $('#favourite-attraction-row').append(
                `<div class="col-md-3 col-5 profile-attraction-col">
                <img src="${data[0].image} " class="profile-attraction">
                <div class="profile-overlay">
                        <div class="profile-attraction-name">${data[0].name}</div>
                    </div>
            </div>` )
            })
            .fail(function() {
                console.log( "Cannot get attraction" );
            }) 
        }
    }

    //get my attraction
    function checkMy(id){
      
            $.get( `/profile/myAttraction/${id}`, function() {
            })
            .done(function(data) {

                for(var a=0; a<data.length;a++){
                 
                     $('#my-attraction-row').append(
                        `<div class="col-md-3 col-5 profile-attraction-col">
                        <img src="${data[a].image} " class="profile-attraction">
                        <div class="profile-overlay">
                                <div class="profile-attraction-name">${data[a].name} <a href="/edit/attraction/"><i class="fas fa-edit"></a></i></div>
                            </div>
                        </div>` )

                }
                
            }
            )
            .fail(function() {
                console.log( "Cannot get attraction" );
                reject();
            })

  
    }

    //

    getFavouriteAttraction()
    checkMy(userId)
    

</script>